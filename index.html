<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Checklist cho M√¨nh Huy·ªÅn üíñ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 40px;
      background: #e0f7fa;
      color: #333;
    }
    h1 {
      color: #0288d1;
      font-size: 50px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 30px 0;
      display: flex;
      align-items: center;
    }
    input[type="checkbox"] {
      transform: scale(2.5);
      margin-right: 24px;
    }
    input[type="text"] {
      width: 60%;
      padding: 16px;
      border-radius: 5px;
      border: 1px solid #81d4fa;
      margin-right: 10px;
    }
    button {
      padding: 8px 12px;
      background: #4fc3f7;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #29b6f6;
    }
    .done {
      text-decoration: line-through;
      color: #888;
    }
    p {
      color: #ffffff;
      background: #4169e1;
      padding: 30px;
      border-radius: 10px;
      border-left: 5px solid #4fc3f7;
      font-size: 30px;
    }
    li span {
      font-size: 27px;
      font-family: 'Segoe UI', sans-serif;
    }
  input[type="checkbox"]:checked + span {
      text-decoration: line-through;
      color: #888;
    }
  input[type="date"] {
    border: 2px solid #4fc3f7;
    border-radius: 8px;
    padding: 10px 14px;
    font-size: 18px;
    font-family: 'Segoe UI', sans-serif;
    background-color: #ffffff;
    color: #333;
    outline: none;
    margin-bottom: 30px;
  }
  input[type="date"]:hover {
    border-color: #29b6f6;
  }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr">  flatpickr(dateInput, {
    dateFormat: "Y-m-d",
    defaultDate: "today",
    locale: "vn"
  });
  function updateFinalMessage() {
    const checkboxes = checklistItems;
    const excludeIndexes = [3, 6]; // exclude 'ch√¨a kh√≥a' and final message
    const relevant = checkboxes.filter((_, i) => !excludeIndexes.includes(i));
    const allChecked = relevant.every(cb => cb.checked);
    finalMessage.style.display = allChecked ? 'list-item' : 'none';
  }

  checklistItems.forEach((cb, index) => {
    if (index !== 6) {
      cb.addEventListener('change', updateFinalMessage);
    }
  });

  updateFinalMessage();
</script>
</head>
<body>

<h1>Checklist cho M√¨nh Huy·ªÅn üíñ</h1>

<p>
  Ch√†o b·∫°n Minh Huy·ªÅn üß∏<br>
  M√¨nh l√† chi·∫øc checklist nh·ªè xinh do Minh Ch√¢u ‚Äúv·ªçc‚Äù ra n√®<br>
  M√¨nh ƒë∆∞·ª£c t·∫°o ra ƒë·ªÉ gi√∫p b·∫°n ki·ªÉm tra l·∫°i m·ªçi th·ª© tr∆∞·ªõc khi ra v·ªÅ, cho y√™n t√¢m v√† ƒë·ª° s√≥t vi·ªác nhe.<br>
  C·ª© tick t·ª´ng d√≤ng m·ªôt, nh·∫π nh√†ng m√† hi·ªáu qu·∫£ l·∫Øm ƒë√≥ üêº‚òÅÔ∏è
</p>
<br>

<ul id="checklist">
  <li><input type="checkbox"> <span>B·∫°n l√†m k·∫øt ca ch∆∞a?</span></li>
  <li><input type="checkbox"> <span>ƒê√£ t·∫Øt ƒë√®n ƒëi·ªán h·∫øt ch∆∞a n√®? ƒê·ªÉ l·∫°i c√°i n√†o c·∫ßn thi·∫øt th√¥i nha</span></li>
  <li><input type="checkbox"> <span>Bi·ªÉn hi·ªáu ƒë·ªì ƒë√£ ƒë∆∞·ª£c mang v√†o h·∫øt ch∆∞a?</span></li>
  <li><input type="checkbox"> <span>Nh·ªõ c·∫ßm theo ch√¨a kh√≥a c·ª≠a h√†ng nha (ch·ªâ c·∫ßn n·∫øu mai b·∫°n l√†m s√°ng thui)</span></li>
  <li><input type="checkbox"> <span>Kh√≥a h·∫øt c√°c t·ªß c·ª≠a ch∆∞a n√®?</span></li>
  <li><input type="checkbox"> <span>ƒê√≥ng c·ª≠a cu·ªën r·ªìi ch·ª©?</span></li>
  <li id="final-message"><input type="checkbox" disabled checked style="display:none;"> <span>Oke h·∫øt r·ªìi ph·∫£i hem, ƒëi d√¨a v·ªõi m√¨nh hoi n√†o ‚ù§Ô∏è</span></li>
</ul>

<script>
  const checklistItems = Array.from(document.querySelectorAll('#checklist input[type="checkbox"]'));
  const finalMessage = document.getElementById('final-message');
  const checklistKeyPrefix = 'checklist-huyen-';

  // Create date input
  const dateInput = document.createElement('input');
  dateInput.type = 'date';
  dateInput.style = 'margin-top: 30px; padding: 10px; font-size: 18px;';
  const label = document.createElement('div');
const weekdayNames = ['Ch·ªß Nh·∫≠t', 'Th·ª© Hai', 'Th·ª© Ba', 'Th·ª© T∆∞', 'Th·ª© NƒÉm', 'Th·ª© S√°u', 'Th·ª© B·∫£y'];
const now = new Date();
const weekday = weekdayNames[now.getDay()];
const formattedDate = `${weekday}, ${String(now.getDate()).padStart(2, '0')}/${String(now.getMonth() + 1).padStart(2, '0')}/${now.getFullYear()}`;
label.textContent = `H√¥m nay l√†: ${formattedDate}`;
label.style = 'font-size: 27px; margin-bottom: 10px; font-weight: normal; font-family: Segoe UI, sans-serif;';
document.body.insertBefore(label, document.getElementById('checklist'));
document.body.insertBefore(dateInput, document.getElementById('checklist'));

  // Load checklist for selected date
  dateInput.addEventListener('change', () => {
    const dateKey = checklistKeyPrefix + dateInput.value;
    const saved = JSON.parse(localStorage.getItem(dateKey) || '[]');
    checklistItems.forEach((checkbox, i) => {
      checkbox.checked = !!saved[i];
    });
  });

  // Save on check/uncheck
  checklistItems.forEach((checkbox, i) => {
    checkbox.addEventListener('change', () => {
      const dateKey = checklistKeyPrefix + dateInput.value;
      const current = Array.from(checklistItems).map(cb => cb.checked);
      localStorage.setItem(dateKey, JSON.stringify(current));
    });
  });

  // Set default date to today
  const today = new Date().toISOString().split('T')[0];
  dateInput.value = today;
  dateInput.dispatchEvent(new Event('change'));
</script>

</body>
</html>
